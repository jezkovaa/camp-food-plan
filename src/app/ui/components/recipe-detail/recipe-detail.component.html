<ion-grid id="recipe-detail">
  <ion-row>
    <ion-col>
      {{"recipes.recipe-detail.course" | translate}}:
    </ion-col>
    <ion-col>
      {{"recipes.recipe-detail.variants" | translate}}:
    </ion-col>
  </ion-row>

  <ion-row>
    <ion-col class="wrap-text">
      {{ getCourseNames(recipe.courses) }}
    </ion-col>
    <ion-col>
      {{recipe.variants.length}}
    </ion-col>
  </ion-row>
  <ion-row *ngIf="isEditing">
    <ion-col>
      <ion-button fill="clear" id="choose-course" class="choose-course-button">
        <img src="assets/icon/cutlery.png" class="responsive-icon" />
        <div>
          {{"recipes.recipe-detail.choose-course" | translate}}
        </div>
      </ion-button>
      <ion-popover id="choose-course-popover" trigger="choose-course" triggerAction="click">
        <ng-template>
          <app-course-list [selectedCourses]="getSelectedCourses"
            (selectedCoursesChange)="selectedCoursesChange($event)" />
        </ng-template>
      </ion-popover>
    </ion-col>
    <ion-col>
      <ion-button fill="clear" (click)="addVariant()" color="success" class="add-variant-button">
        <ion-icon slot="icon-only" name="add" />
        <div>
          {{"recipes.recipe-detail.add-variant" | translate}}
        </div>
      </ion-button>
    </ion-col>
  </ion-row>
  <ion-row *ngIf="recipe !== null && recipe.variants.length > 1">
    <ion-searchbar animated="true" placeholder="{{'searchBar' | translate}}" show-clear-button="always" />
  </ion-row>
  <ion-row *ngIf="((isEditing || isChoosing) && recipe.variants.length > 0)" class="ion-align-items-center">

    <ion-col>
      {{"recipes.recipe-detail.selected" | translate }} : {{selectedCount}}
    </ion-col>
    <ion-col>
      <ion-button *ngIf="isEditing" (click)="deleteSelected()" color="danger">
        <ion-icon name="trash" />
        <div>
          {{"recipes.recipe-detail.delete-selected" | translate}}
        </div>
      </ion-button>
      <ion-button [disabled]="selectedCount === 0" *ngIf="isChoosing" (click)="chooseSelected()" color="primary">
        <div>
          {{"recipes.recipe-detail.choose-variants" | translate}}
        </div>
      </ion-button>
    </ion-col>

  </ion-row>
  <ion-row>
    <ion-col *ngIf="variantsListToBeDisplayed">
      <app-variants-list [variants]="recipe.variants" [isEditing]="isEditing" [isChoosing]="isChoosing"
        (selectedCountChanged)="selectedCountChanged($event)" />
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col *ngIf="!(isEditing || isChoosing) && recipe.variants.length === 1 ">
      <app-recipe-variant-detail [variant]="recipe.variants[0]" />
    </ion-col>
    <ion-col *ngIf="recipe !== null && recipe.variants.length === 0">

      <p>{{"recipes.recipe-detail.no-variants" | translate}}</p>
    </ion-col>
  </ion-row>
</ion-grid>